import{u as Q,b as T,Y as S,c as E,o as q,w as l,f as o,a as t,t as n,a3 as c,Q as m,e as u,l as p,a0 as b,ag as P,j as D,ah as U,Z as j}from"./index-BQSgIXwL.js";import{_ as B,Q as N,a as v,b as $,C as L,t as A,f as I}from"./_plugin-vue_export-helper-DtywERE2.js";import{u as M,Q as O}from"./task-store-BYIGfhtW.js";import{Q as F}from"./QPage-CZMNfo7v.js";import{u as G}from"./use-quasar-DpaBgToP.js";import"./QList-Buv9lwN8.js";import"./QLinearProgress-ZcHCRENF.js";import"./format-E9ViLCS2.js";const H={class:"row items-center q-mb-lg"},R={class:"col"},W={class:"row q-mb-lg justify-center q-gutter-xl"},Y={class:"text-h4"},Z={class:"text-h4"},z={class:"text-h4"},J={class:"row items-center justify-between q-mb-md"},K={__name:"DashboardPage",setup(X){const k=Q().user,r=M(),w=G(),y=[{name:"title",label:"Title",field:"title",align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"status",label:"Status",field:"status",align:"center"},{name:"dueDate",label:"Due Date",field:"dueDate",align:"center"},{name:"actions",label:"Actions",field:"actions",align:"center"}],x=(i,e=6)=>i?i.split(" ").map((d,g)=>(g+1)%e===0?d+`
`:d).join(" "):"",h=(i,e=15)=>i?i.split(" ").map((d,g)=>(g+1)%e===0?d+`
`:d).join(" "):"",f=T(!1),s=T({}),_=i=>{s.value={...i},s.value.dueDate&&(s.value.dueDateTime=A(s.value.dueDate)),f.value=!0},V=async()=>{if(new Date(s.value.dueDateTime)<new Date){w.notify({type:"negative",message:"Due date cannot be in the past"});return}const e={title:s.value.title,description:s.value.description,status:s.value.status,dueDate:I(s.value.dueDateTime)};try{await r.updateTask(s.value.id,e),f.value=!1,await r.fetchDashboardTasks()}catch(a){console.error("Error updating task:",a)}},C=async i=>{try{await r.deleteTask(i),await r.fetchDashboardTasks()}catch(e){console.error("Error deleting task:",e),w.notify({type:"negative",message:"Failed to delete task"})}};return S(async()=>{await r.fetchDashboardTasks()}),(i,e)=>(q(),E(F,{class:"q-pa-md"},{default:l(()=>[o("div",H,[o("div",R,[o("h4",null,"Welcome, "+n(c(k)?.username||"User"),1),e[6]||(e[6]=o("p",{class:"text-subtitle2"},"Hereâ€™s a summary of your tasks",-1))])]),o("div",W,[t(m,{class:"col-12 col-sm-6 col-md-3 bg-primary text-white text-center"},{default:l(()=>[t(u,null,{default:l(()=>[e[7]||(e[7]=o("div",{class:"text-h6"},"Total Tasks",-1)),o("div",Y,n(c(r).totalElements),1)]),_:1})]),_:1}),t(m,{class:"col-12 col-sm-6 col-md-3 bg-positive text-white text-center"},{default:l(()=>[t(u,null,{default:l(()=>[e[8]||(e[8]=o("div",{class:"text-h6"},"Completed",-1)),o("div",Z,n(c(r).completedTasks),1)]),_:1})]),_:1}),t(m,{class:"col-12 col-sm-6 col-md-3 bg-warning text-white text-center"},{default:l(()=>[t(u,null,{default:l(()=>[e[9]||(e[9]=o("div",{class:"text-h6"},"Pending",-1)),o("div",z,n(c(r).pendingTasks),1)]),_:1})]),_:1})]),t(m,{flat:"",bordered:""},{default:l(()=>[t(u,null,{default:l(()=>[o("div",J,[e[10]||(e[10]=o("div",{class:"text-h6"},"Recent Tasks (Latest 5)",-1)),t(p,{color:"primary",flat:"",label:"View All","icon-right":"arrow_forward",onClick:e[0]||(e[0]=a=>i.$router.push("/dashboard/tasks"))})]),t(N,{rows:c(r).dashboardTasks,columns:y,"row-key":"id",flat:"",bordered:"","hide-bottom":""},{"body-cell-title":l(a=>[t(v,{props:a,style:{"white-space":"pre-line","text-align":"center","max-width":"250px"}},{default:l(()=>[b(n(x(a.row.title)),1)]),_:2},1032,["props"])]),"body-cell-description":l(a=>[t(v,{props:a,style:{"white-space":"pre-line","text-align":"left","max-width":"400px"}},{default:l(()=>[b(n(h(a.row.description)),1)]),_:2},1032,["props"])]),"body-cell-status":l(a=>[t(v,{props:a,class:"status-cell text-center"},{default:l(()=>[t($,{color:a.row.status==="COMPLETED"?"green":"orange",class:"q-pa-sm text-white",rounded:""},{default:l(()=>[b(n(a.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-actions":l(a=>[t(v,{align:"right"},{default:l(()=>[t(p,{dense:"",flat:"",color:"primary",icon:"edit",onClick:d=>_(a.row)},null,8,["onClick"]),t(p,{dense:"",flat:"",color:"negative",icon:"delete",onClick:d=>C(a.row.id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows"])]),_:1})]),_:1}),t(P,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a)},{default:l(()=>[t(m,{style:{"min-width":"400px"}},{default:l(()=>[t(u,null,{default:l(()=>[...e[11]||(e[11]=[o("div",{class:"text-h6"},"Edit Task",-1)])]),_:1}),t(u,{class:"q-gutter-md"},{default:l(()=>[t(D,{modelValue:s.value.title,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.title=a),label:"Title",filled:""},null,8,["modelValue"]),t(D,{modelValue:s.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.description=a),label:"Description",type:"textarea",filled:""},null,8,["modelValue"]),t(O,{modelValue:s.value.status,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.status=a),options:["PENDING","COMPLETED"],label:"Status",filled:""},null,8,["modelValue"]),t(D,{modelValue:s.value.dueDateTime,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.dueDateTime=a),label:"Due Date & Time",type:"datetime-local",filled:"",required:""},null,8,["modelValue"])]),_:1}),t(U,{align:"right"},{default:l(()=>[j(t(p,{flat:"",label:"Cancel"},null,512),[[L]]),t(p,{color:"primary",label:"Save",onClick:V})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},ne=B(K,[["__scopeId","data-v-391525bf"]]);export{ne as default};
